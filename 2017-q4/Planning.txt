
It's probably worthwhile to defne some goals, and perhaps do a little bit of structuring up front. 

## Why?

The existing code has some downsides:

- It is really verbose, which makes it difficult to grok
- Lots of code repetition
- It (maybe) contains unused baggage from previous iterations
- The Rmd is less amenable to Chelsea's workflow

## Outline

1. Pull in data, and do some cleaning/prep: 
   - relevant permission records and demographic variables
   - relevant population estimates
   
2. Produce Estimates:
   - 3 metrics: part, rate, churn
   - 5 dimensions: all, res, sex, age, county
   
3. Convert to Tableau format
   - label variables (e.g., segment, category) as appropriate
   - stack into single table
   
4. Tests:

Not quite sure about a good approach for testing the operations. This is potentially something that could be added in down the road . A couple ideas:

- compare to previously produced results in a systematic way
- test to ensure metrics end up in a reasonable range

## Possible Challenges

1. Incomplete process?: additional code needed to prepare results?
